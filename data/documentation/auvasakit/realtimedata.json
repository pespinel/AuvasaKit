{"metadata":{"modules":[{"name":"AuvasaKit"}],"roleHeading":"Article","role":"article","title":"Real-Time Data"},"primaryContentSections":[{"content":[{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"text":"AuvasaKit provides three types of real-time data:","type":"text"}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Vehicle Positions"}]},{"text":" - GPS locations of active buses","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Trip Updates","type":"text"}]},{"type":"text","text":" - Predicted arrival times with delays"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Service Alerts"}],"type":"strong"},{"text":" - Disruptions and notifications","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"All real-time data is updated every 15-30 seconds from AUVASA’s servers."}]},{"type":"heading","level":2,"text":"Vehicle Positions","anchor":"Vehicle-Positions"},{"type":"heading","level":3,"text":"Fetch All Vehicles","anchor":"Fetch-All-Vehicles"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Get positions of all active buses:"}]},{"type":"codeListing","code":["let vehicles = try await client.fetchVehiclePositions()","","for vehicle in vehicles {","    print(\"Vehicle: \\(vehicle.vehicle.label ?? vehicle.vehicle.id)\")","    print(\"  Position: \\(vehicle.position.latitude), \\(vehicle.position.longitude)\")","    print(\"  Bearing: \\(vehicle.bearing ?? 0)°\")","    print(\"  Speed: \\(vehicle.speed ?? 0) m\/s\")","","    if let occupancy = vehicle.occupancyStatus {","        print(\"  Occupancy: \\(occupancy)\")","    }","","    if let trip = vehicle.trip {","        print(\"  Route: \\(trip.routeId)\")","        print(\"  Destination: \\(trip.tripHeadsign ?? \"?\")\")","    }","}"],"syntax":"swift"},{"type":"heading","level":3,"text":"Filter by Route","anchor":"Filter-by-Route"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Get vehicles only on a specific route:"}]},{"type":"codeListing","code":["let line1Buses = try await client.fetchVehiclePositions(routeId: \"L1\")"],"syntax":"swift"},{"type":"heading","level":3,"text":"Find Nearby Vehicles","anchor":"Find-Nearby-Vehicles"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Search for buses within a radius:"}]},{"type":"codeListing","code":["let userLocation = Coordinate(latitude: 41.6523, longitude: -4.7245)","let nearbyBuses = try await client.findNearbyVehicles(","    coordinate: userLocation,","    radiusMeters: 1000  \/\/ 1 km radius",")","","for vehicle in nearbyBuses {","    let distance = userLocation.distance(to: vehicle.position)","    print(\"\\(vehicle.vehicle.label ?? \"?\"): \\(Int(distance))m away\")","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Trip Updates","anchor":"Trip-Updates"},{"type":"heading","level":3,"text":"Get Arrivals at a Stop","anchor":"Get-Arrivals-at-a-Stop"},{"type":"paragraph","inlineContent":[{"text":"Fetch predicted arrivals with real-time delays:","type":"text"}]},{"type":"codeListing","code":["let updates = try await client.fetchTripUpdates(stopId: \"123\")","","for update in updates {","    print(\"Trip: \\(update.trip.tripId)\")","","    if let delay = update.delay {","        print(\"  Overall delay: \\(delay) seconds\")","    }","","    for stopUpdate in update.stopTimeUpdates {","        if stopUpdate.stopId == \"123\" {","            if let arrival = stopUpdate.arrival {","                print(\"  Arrival: \\(Date(timeIntervalSince1970: TimeInterval(arrival.time)))\")","                if let delay = arrival.delay {","                    print(\"  Delay: \\(delay) seconds\")","                }","            }","        }","    }","}"],"syntax":"swift"},{"type":"heading","level":3,"text":"Combined Arrivals (Recommended)","anchor":"Combined-Arrivals-Recommended"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"getNextArrivals()"},{"type":"text","text":" for a simplified API that merges schedule + real-time:"}]},{"type":"codeListing","code":["let arrivals = try await client.getNextArrivals(stopId: \"123\", limit: 5)","","for arrival in arrivals {","    print(\"\\(arrival.route.shortName): \\(arrival.trip.headsign ?? \"?\")\")","    print(\"  Best time: \\(arrival.bestTime)\")  \/\/ Uses estimated or scheduled","","    if arrival.realtimeAvailable {","        if let delay = arrival.delayDescription {","            print(\"  Status: \\(delay)\")  \/\/ \"5 min late\", \"On time\", etc.","        }","    } else {","        print(\"  Status: Scheduled (no real-time data)\")","    }","","    if arrival.isDelayed {","        print(\"  ⚠️ Delayed > 5 minutes\")","    }","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Service Alerts","anchor":"Service-Alerts"},{"type":"heading","level":3,"text":"Fetch All Alerts","anchor":"Fetch-All-Alerts"},{"type":"paragraph","inlineContent":[{"text":"Get current service disruptions:","type":"text"}]},{"type":"codeListing","code":["let alerts = try await client.fetchAlerts()","","for alert in alerts {","    print(\"Alert: \\(alert.headerText)\")","    print(\"  \\(alert.descriptionText)\")","    print(\"  Severity: \\(alert.severity)\")","","    if let cause = alert.cause {","        print(\"  Cause: \\(cause)\")","    }","    if let effect = alert.effect {","        print(\"  Effect: \\(effect)\")","    }","","    print(\"  Active periods:\")","    for period in alert.activePeriods {","        print(\"    \\(period.start) - \\(period.end ?? \"ongoing\")\")","    }","}"],"syntax":"swift"},{"type":"heading","level":3,"text":"Filter by Route","anchor":"Filter-by-Route"},{"type":"paragraph","inlineContent":[{"text":"Get alerts affecting a specific route:","type":"text"}]},{"type":"codeListing","code":["let route1Alerts = try await client.fetchAlerts(routeId: \"L1\")"],"syntax":"swift"},{"type":"heading","level":2,"text":"Trip Details","anchor":"Trip-Details"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Get comprehensive information about a specific trip:"}]},{"type":"codeListing","code":["let tripDetails = try await client.getTripDetails(tripId: \"TRIP_123\")","","print(\"Route: \\(tripDetails.route.longName)\")","print(\"Destination: \\(tripDetails.trip.headsign ?? \"?\")\")","print(\"Stops: \\(tripDetails.stopCount)\")","","if let delay = tripDetails.delay {","    print(\"Current delay: \\(delay) seconds\")","}","","if let progress = tripDetails.progress {","    print(\"Progress: \\(Int(progress * 100))%\")","}","","if let nextStop = tripDetails.nextStop {","    print(\"Next stop: \\(nextStop.stopId)\")","    print(\"  Arrival: \\(nextStop.bestTime)\")","}","","if let currentStop = tripDetails.currentStop {","    print(\"Current stop: \\(currentStop.stopId)\")","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Data Freshness","anchor":"Data-Freshness"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Real-time data typically updates every 15-30 seconds. The "},{"type":"codeVoice","code":"timestamp"},{"type":"text","text":" field on each entity indicates when the data was last updated:"}]},{"type":"codeListing","code":["let vehicles = try await client.fetchVehiclePositions()","","for vehicle in vehicles {","    let age = Date().timeIntervalSince(vehicle.timestamp)","    print(\"Data age: \\(Int(age)) seconds\")","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"For continuous updates, use "},{"isActive":true,"type":"reference","identifier":"doc:\/\/auvasakit.AuvasaKit\/documentation\/AuvasaKit\/Subscriptions"},{"type":"text","text":" instead of polling manually."}]}],"kind":"content"}],"variants":[{"paths":["\/documentation\/auvasakit\/realtimedata"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/auvasakit.AuvasaKit\/documentation\/AuvasaKit"]]},"abstract":[{"type":"text","text":"Access live transit information from AUVASA’s GTFS Real-Time feed."}],"sections":[],"seeAlsoSections":[{"identifiers":["doc:\/\/auvasakit.AuvasaKit\/documentation\/AuvasaKit\/Subscriptions"],"generated":true,"anchor":"Real-Time-Features","title":"Real-Time Features"}],"identifier":{"url":"doc:\/\/auvasakit.AuvasaKit\/documentation\/AuvasaKit\/RealTimeData","interfaceLanguage":"swift"},"references":{"doc://auvasakit.AuvasaKit/documentation/AuvasaKit/Subscriptions":{"kind":"article","url":"\/documentation\/auvasakit\/subscriptions","title":"Subscriptions","identifier":"doc:\/\/auvasakit.AuvasaKit\/documentation\/AuvasaKit\/Subscriptions","type":"topic","abstract":[{"type":"text","text":"Subscribe to continuous real-time updates using AsyncStream."}],"role":"article"},"doc://auvasakit.AuvasaKit/documentation/AuvasaKit":{"identifier":"doc:\/\/auvasakit.AuvasaKit\/documentation\/AuvasaKit","kind":"symbol","title":"AuvasaKit","url":"\/documentation\/auvasakit","abstract":[{"type":"text","text":"Modern Swift SDK for accessing AUVASA (Autobuses Urbanos de Valladolid) transit data."}],"role":"collection","type":"topic"}}}